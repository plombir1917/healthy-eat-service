//TODO: unnecessary feilds
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model patient {
  id       Int    @id @default(autoincrement())
  name     String
  login    String @unique
  password String
  height   Int
  weight   Int
  characteristic characteristic? 
  illnes illness[]  
}

model doctor {
  id           Int    @id @default(autoincrement())
  name         String
  surname      String
  photo        String
  achievements String
  login        String @unique
  password     String
}

model admin {
  id       Int    @id @default(autoincrement())
  name     String
  surname  String
  login    String @unique
  password String
}

model illness {
  id          Int        @id @default(autoincrement())
  name        String
  description String
  symptome    symptome[]
  patient patient? @relation(fields: [patient_id], references: [id])
  patient_id Int?
  diet diet[]
}

model diet {
  id   Int    @id @default(autoincrement())
  name String
  process_map process_map[]
  illness illness @relation(fields: [illness_id], references: [id])
  illness_id Int
}

model process_map {
  id              Int    @id @default(autoincrement())
  dish_name       String
  ingredients     String
  cooking_process String
  proteins        Int
  fats            Int
  carbohydrates   Int
  calories        Int
  diet            diet? @relation(fields: [diet_id], references: [id])
  diet_id         Int?
}

model symptome {
  id         Int      @id @default(autoincrement())
  name       String
  illness    illness? @relation(fields: [illness_id], references: [id])
  illness_id Int?
}

model characteristic {
  id          Int    @id @default(autoincrement())
  intolerance String
  preference  String
  patient patient? @relation(fields: [patient_id], references: [id])
  patient_id Int? @unique
}
